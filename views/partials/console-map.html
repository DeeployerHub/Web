<script>
    function loadMap() {
        var mapStyles = [{
            "featureType": "all",
            "elementType": "all",
            "stylers": [{"hue": "#000000"}, {"saturation": -100}, {"lightness": -30}]
        }, {
            "featureType": "all",
            "elementType": "labels.text.fill",
            "stylers": [{"color": "#ffffff"}]
        }, {
            "featureType": "all",
            "elementType": "labels.text.stroke",
            "stylers": [{"color": "#353535"}]
        }, {
            "featureType": "landscape",
            "elementType": "geometry",
            "stylers": [{"color": "#656565"}]
        }, {
            "featureType": "poi",
            "elementType": "geometry.fill",
            "stylers": [{"color": "#505050"}]
        }, {
            "featureType": "poi",
            "elementType": "geometry.stroke",
            "stylers": [{"color": "#808080"}]
        }, {
            "featureType": "road",
            "elementType": "geometry",
            "stylers": [{"color": "#454545"}]
        }, {
            "featureType": "transit",
            "elementType": "labels",
            "stylers": [
                {"hue": "#000000"},
                {"saturation": -100},
                {"lightness": -40},
                {"invert_lightness": false},
                {"gamma": 1.5}
            ]
        }];

        window.map = window.map || new google.maps.Map($('.map-view').get(0), {
                scrollwheel: false,
                styles: mapStyles,
                zoom: 15,
                maxZoom: 16,
                minZoom: 13,
                streetViewControl: false,
                mapTypeControl: false,
                mapTypeId: google.maps.MapTypeId.ROADMAP
            });

        var refreshLocationCount = 0;
        window.refreshLocation = function (position) {
            if (refreshLocationCount++ <= 1) {
                var pos = {
                    lat: position.latitude,
                    lng: position.longitude
                };

                window.map.setCenter(pos);
            }
        };
    }
</script>
<script src="https://maps.googleapis.com/maps/api/js?key=[[ googleMapApiKey ]]&callback=loadMap" defer></script>